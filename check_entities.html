<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Проверка Entity</title>
    <script src="//api.bitrix24.com/api/v1/"></script>
</head>
<body>
    <h1>Проверка созданных Entity</h1>
    <button onclick="checkEntities()">Проверить Entity</button>
    <div id="result" style="margin-top: 20px; white-space: pre-wrap; font-family: monospace;"></div>

    <script>
        function checkEntities() {
            const result = document.getElementById("result");
            result.textContent = "Загрузка...\n";

            BX24.init(function() {
                console.log("Проверяем entity...");
                
                BX24.callMethod("entity.get", {}, function(res) {
                    if (res.error()) {
                        result.textContent += "ОШИБКА: " + JSON.stringify(res.error(), null, 2);
                        console.error("Ошибка:", res.error());
                    } else {
                        const entities = res.data();
                        result.textContent = "Найдено Entity: " + entities.length + "\n\n";
                        
                        entities.forEach(entity => {
                            result.textContent += "━━━━━━━━━━━━━━━━━━━━\n";
                            result.textContent += "ENTITY: " + entity.ENTITY + "\n";
                            result.textContent += "NAME: " + entity.NAME + "\n";
                            result.textContent += "\n";
                        });
                        
                        console.log("Entities:", entities);
                    }
                });
            });
        }
    </script>
</body>
</html>
