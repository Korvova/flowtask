# Flowtask - –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–∫—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞**: `/var/www/flowtask` - Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–£–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä**: Bitrix24 VM (213.139.229.71)
  - SSH –¥–æ—Å—Ç—É–ø: `sshpass -p 's&HRXRbcT8RR' ssh root@213.139.229.71`
  - –¢–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è production –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è
1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–¥—ë—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ `/var/www/flowtask`
2. –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git: `git add . && git commit -m "message"`
3. –ü—É—à–∞—Ç—Å—è –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `git push`
4. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Bitrix24 –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `deploy.sh` –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

‚ö†Ô∏è **–í–ê–ñ–ù–û**:
- –ù–ï –Ω—É–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ `/var/www/html`
- –ù–ï –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –¢–û–õ–¨–ö–û –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ Bitrix24

## üéØ –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

**Flowtask** - —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Bitrix24, –∫–æ—Ç–æ—Ä–æ–µ:
- –†–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ iframe –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–¥–∞—á–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (React Flow)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ –∏ –ø—Ä–µ–¥–∑–∞–¥–∞—á–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Bitrix24 REST API –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ V2 (—Ç–µ–∫—É—â–∞—è)
- **Entity Storage V2**: –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `entity.item` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –ø–æ–ª—é `NAME`
- **EntityManagerV2.js**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞–º–∏ –∏ —Å–≤—è–∑—è–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **FlowCanvasV2.js**: React Flow canvas —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Å–≤—è–∑–µ–π
- **TaskModalV2.js**: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
- **TaskHandler.js**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –∑–∞–¥–∞—á

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- `handler.php` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ iframe Bitrix24)
- `components/EntityManagerV2.js` - –º–µ–Ω–µ–¥–∂–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- `components/FlowCanvasV2.js` - –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç canvas
- `components/TaskModalV2.js` - –º–æ–¥–∞–ª–∫–∞ –¥–ª—è –∑–∞–¥–∞—á
- `deploy.sh` - —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ù–ê —Å–µ—Ä–≤–µ—Ä–µ Bitrix24:
```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# 2. –ó–∞–ø—É—à–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git push

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
# –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Bitrix24 —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
```

### SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
sshpass -p 's&HRXRbcT8RR' ssh root@213.139.229.71 "–∫–æ–º–∞–Ω–¥–∞"
```

## üì¶ MCP —Å–µ—Ä–≤–µ—Ä—ã

–î–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- **b24-dev-mcp**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Bitrix24 REST API
- **browser-automation**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **context7**: –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ (React Flow –∏ –¥—Ä.)

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Connection Validation (Context7 + React Flow)
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–≤—è–∑–µ–π:
1. –ó–∞–ø—Ä–µ—Ç —Å–∞–º–æ—Å–≤—è–∑–µ–π
2. –ó–∞–ø—Ä–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
3. Future —É–∑–ª—ã –Ω–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏

### Entity Storage V2
–í—Å–µ —É–∑–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ:
- `NAME` = `process_{processId}_node_{nodeId}` –¥–ª—è —É–∑–ª–æ–≤
- `NAME` = `process_{processId}_connection_{fromId}_{toId}` –¥–ª—è —Å–≤—è–∑–µ–π

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

1. **–ù–ï –ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª—å–Ω–æ** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Bitrix24
2. **–ù–ï –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ git push** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å EntityManagerV2** - —Å—Ç–∞—Ä—ã–π EntityManager deprecated
4. **saveConnection vs addConnection** - saveConnection –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —É–∑–ª–∞

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
sshpass -p 's&HRXRbcT8RR' ssh root@213.139.229.71 "cd /path/to/flowtask && git status"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
sshpass -p 's&HRXRbcT8RR' ssh root@213.139.229.71 "tail -f /var/log/nginx/error.log"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
git status
git diff
```
